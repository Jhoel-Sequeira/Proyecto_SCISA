{% extends "layout.html" %} {% block content %}
<!----===== HOME ===== -->

<title>SCISA-Home</title>

<nav class="div-encabezado">
    <label class="texto-encabezado-nav">HOME</label>

</nav>

<nav class="div-encabezado-opciones">
    <div class="barra-busqueda">
        <form action="#">
            <button>
                        <box-icon name='search'></box-icon>
                    </button>
            <input type="text" placeholder=" Busqueda de Proyecto" name="busqueda">

        </form>
    </div>
    <span class="btn_menu1">
            <ul class="menu-barratop-opciones-items">
    {% if session.user_id %} {% if session.userrole == 1%}
    <!-- admin -->
        {% if soli%}
        {% for fila in soli if not soli.Estado == "Pendientes" %}
                            <box-icon type='solid' name='bell'></box-icon><span id="burbuja1" ></span>
    <li><a href="#" onclick="solicitud()">Notificaciones<span id="burbuja" ></span></a>
    </li>


    {% endfor %} {% for fila in soli if not soli.Estado == "Aprobados" %}
    <box-icon type='solid' name='bell'></box-icon>
    <li><a href="#">Notificaciones</a></li>


    {% endfor %} {%else%}
    <box-icon type='solid' name='bell'></box-icon>
    <li><a href="#">Notificaciones</a></li>
    {% endif%}

    <box-icon type='solid' onclick="reportes()" name='report'></box-icon>
    <li><a href="#" onclick="reportes()">Reportes</a></li>
    <box-icon name='calendar' data-toggle="modal" data-target="#myModal" onclick="calendario()"></box-icon>
    <li><a href="#" data-toggle="modal" data-target="#myModal" onclick="calendario()">Calendario</a></li>
    {%else%}
    <!-- Empleado -->
    {% if soli%} {% for fila in soli %} {% if fila.Vigente == 0 and fila.Estado == "Pendiente"%}
    <box-icon type='solid' name='bell'></box-icon><span id="burbuja1"></span>
    <li><a href="#" onclick="not()">Notificaciones<span id="burbuja" ></span></a>
    </li>
    {%else%}
    <box-icon type='solid' name='bell'></box-icon>
    <li><a href="#">Notificaciones</a></li>
    {% endif%} {% endfor %} {%else%}
    <box-icon type='solid' name='bell'></box-icon>
    <li><a href="#">Notificaciones</a></li>
    {% endif%}
    <box-icon name='spreadsheet'></box-icon>
    <li><a href="#" onclick="solicitud()">Solicitud</a></li>
    {% endif%}{% endif%}



    </ul>
    </span>

</nav>
{% if session.user_id %} {% if session.userrole == 1%}
<main class="main-cont">
    <div class="div-listaproyecto">
        <label class="texto-encabezado-nav">Proyectos</label>
        <div class="container">
            <div class="tabla">
                <form action="/modals" method="POST">
                    <table class="custab">
                        <thead>
                            <tr>
                                <th>ID Proyecto</th>
                                <th>Nombre Proyecto</th>
                                <th>Fecha Inicio</th>
                                <th>Fecha Fin</th>
                                <th>Estado</th>
                                <th>Responsable</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody class="cuerpo-tabla">
                            {% for fila in pro %}
                            <tr>
                                <td>{{ fila.Id_Proyecto }}</td>
                                <td>{{ fila.Nombre}}</td>
                                <td>{{ fila.FechaInicio}}</td>
                                {% if fila.FechaFin == "NULL"%}
                                <td>--</td>
                                {%else%}
                                <td>{{ fila.FechaFin}}</td>
                                {% endif%} {% if fila.Estado == "Completado"%}
                                <td class="completo"><text class="textoc">{{ fila.Estado}}</text></td>
                                {% elif fila.Estado == "Incompleto"%}
                                <td class="incompleto"><text class="textoi">{{ fila.Estado}}</text></td>
                                {%else%}
                                <td class="progreso"><text class="textop">{{ fila.Estado}}</text></td>
                                {% endif%}
                                <td>{{ fila.Empleado}}</td>
                                <td class="text-center">
                                    <a href="{{url_for('modal')}}">
                                        <box-icon name='show' type="solid" color='#3075c9'></box-icon>
                                    </a>
                                </td>

                            </tr>
                            {% endfor %}

                        </tbody>

                    </table>
                </form>
            </div>
        </div>
    </div>
    <div class="div-grafico">
        <label class="texto-encabezado-nav">Estadísticas del mes</label>
        <div class="div-grafico-gra">
            <canvas id="myChart"></canvas>
        </div>
    </div>
    <div class="div-solicitud">
        <label class="texto-encabezado-nav">Notificaciones</label>
        <div class="container">
            <div class="tabla">
                <form action="/AceptarSoli" method="POST">
                    <table class="custab">
                        <thead>
                            <tr>
                                <th>ID Solicitud</th>
                                <th>Nombre</th>
                                <th>Titulo</th>
                                <th>justificacion</th>
                                <th>Fecha Solicitud</th>
                                <th>Estado</th>
                                <th class="text-center">Accción</th>
                            </tr>
                        </thead>
                        <tbody class="cuerpo-tabla">
                            {% for fila in soli %}
                            <tr>
                                <td>{{ fila.Id_Solicitud }}</td>
                                <td>{{ fila.Nombre}}</td>
                                <td>{{ fila.Titulo}}</td>
                                <td>{{ fila.Justificacion}}</td>
                                <td>{{ fila.FechaSoli}}</td>
                                <td>{{ fila.Estado}}</td>
                                <td class="text-center">
                                    <button class="boton-invisible" name="resp" value="{{fila.Id_Solicitud}}" type="submit">
                                        <box-icon name='show' type="solid" color='#3075c9'></box-icon>
                                    </button>
                                </td>

                            </tr>
                            {% endfor %}

                        </tbody>

                    </table>
                </form>
            </div>
        </div>
    </div>

    <div class="div-reportes">
        <label class="texto-encabezado-nav">Reportes</label>
        <div class="container">
            <div class="tabla">
                <table class="custab">
                    <thead>
                        <tr>
                            <th>ID Empleado</th>
                            <th>Nombre Empleado</th>
                            <th>Motivo</th>
                            <th>Estado</th>
                            <th class="text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody class="cuerpo-tabla">
                        <tr>
                            <td>1</td>
                            <td>Juan</td>
                            <td>Adelanto de Salario</td>
                            <td>Pendiente</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>News</td>
                            <td>News Cate</td>
                            <td>News Cate</td>
                            <td class="text-center">
                                <box-icon name='show' data-toggle="modal" data-target="#modalReporte" type="solid" color='#3075c9'></box-icon>
                            </td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>
    </div>
    {%block modal%}{% endblock %}
    <!--Modal reporte -->
    <div class="modal" id="modalReporte">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Reportes</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    Modal body..
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
</main>
{%else%}
<!-- VISTA DE EMPLEADOS -->
<main class="main-cont">
    <div class="div-listaproyecto">
        <label class="texto-encabezado-nav">Mis Proyectos</label>
        <div class="container-emp">
            <div class="tabla-emp">
                <form action="/modals" method="POST">
                    <table class="custab-emp">
                        <thead>
                            <tr>
                                <th>ID Proyecto</th>
                                <th>Nombre Proyecto</th>
                                <th>Fecha Inicio</th>
                                <th>Fecha Fin</th>
                                <th>Estado</th>
                                <th>Responsable</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody class="cuerpo-tabla-emp">
                            {% for fila in proUser %}
                            <tr>
                                <td>{{ fila.Id_Proyecto }}</td>
                                <td>{{ fila.Nombre}}</td>
                                <td>{{ fila.FechaInicio}}</td>
                                {% if fila.FechaFin == "NULL"%}
                                <td>--</td>
                                {%else%}
                                <td>{{ fila.FechaFin}}</td>
                                {% endif%} {% if fila.Estado == "Completado"%}
                                <td id="estado1"><text id="emp1">1</text></td>
                                {% elif fila.Estado == "Incompleto"%}
                                <td id="celda2"><text id="text">2</text></td>
                                {%else%}
                                <td id="celda3"><text id="emp3">3</text></td>
                                {% endif%}
                                <td>{{ fila.Empleado}}</td>
                                <td class="text-center">
                                    <a href="{{url_for('modal')}}">
                                        <box-icon name='show' type="solid" color='#3075c9'></box-icon>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}

                        </tbody>

                    </table>
                </form>
            </div>
        </div>
    </div>
    <div class="div-grafico">
        <label class="texto-encabezado-nav">Mis Estadisticas</label>
        <br>
        <label class="texto-encabezado-nav">Horas Logeadas:</label>
        <br>
        <label class="texto-encabezado-nav">Tareas Realizadas:</label>

    </div>
    <div class="div-solicitud">
        <form action="/solicitud" method="POST">
            <div class="form-group">
                <label for="exampleFormControlInput1">Nombre</label>
                <input type="text" class="form-control" name="nombre" id="exampleFormControlInput1" placeholder="Nombre">
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Titulo Solicitud</label>
                <input type="text" class="form-control" name="titulo" id="exampleFormControlInput1" placeholder="Titulo">
            </div>

            <div class="form-group">
                <label for="exampleFormControlTextarea1">Justificación</label>
                <textarea class="form-control" name="justificacion" id="exampleFormControlTextarea1" rows="3"></textarea>
            </div>
            <div class="col text-center">
                <button type="submit" class="btn btn-primary" type="submit">Enviar</button>
            </div>
        </form>
    </div>
    <div class="div-not">
        <label class="texto-encabezado-nav">Notificaciones</label>
        <div class="container">
            <div class="tabla">
                <form action="/borrarSoli" method="POST">
                    <table class="custab">
                        <thead>
                            <tr>
                                <th>ID Solicitud</th>
                                <th>Nombre</th>
                                <th>Titulo</th>
                                <th>justificacion</th>
                                <th>Fecha Solicitud</th>
                                <th>Estado</th>
                                <th class="text-center">Accción</th>
                            </tr>
                        </thead>
                        <tbody class="cuerpo-tabla">
                            {% for fila in soli %}
                            <tr>
                                <td>{{ fila.Id_Solicitud }}</td>
                                <td>{{ fila.Nombre}}</td>
                                <td>{{ fila.Titulo}}</td>
                                <td>{{ fila.Justificacion}}</td>
                                <td>{{ fila.FechaSoli}}</td>
                                <td>{{ fila.Estado}}</td>
                                <td class="text-center">
                                    <!-- <button class="boton-invisible" name="resp" value="{{fila.Id_Solicitud}}" type="submit">
                                        <box-icon name='show' type="solid" color='#3075c9'></box-icon>
                                    </button> -->
                                </td>

                            </tr>
                            {% endfor %}

                        </tbody>

                    </table>
                </form>
            </div>
        </div>
    </div>


    <div class="div-reportes">
        <label class="texto-encabezado-nav">Mis Reportes</label>
        <form action="/reporte" method="POST">
            <div class="form-group">
                <label for="exampleFormControlInput1">Nombre Tarea</label>
                <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Nombre">
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Porcentaje Completado</label>
                <input type="number" class="form-control" id="exampleFormControlInput1" placeholder="Porcentaje">
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Descripción</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label for="exampleFormControlFile1">Insertar Imagen de los Avances</label>
                <input type="file" class="form-control-file" id="exampleFormControlFile1">
            </div>
            <button type="submit" class="btn btn-primary">Enviar</button>
        </form>
    </div>
    <!--Modal reporte -->
    <div class="modal" id="modalReporte">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Reportes</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    Modal body..
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
</main>
{% endif%}{% endif%}



<!----===== FIN HOME ===== -->
{% endblock %}